"use strict";(globalThis["webpackChunkquasar_bgb_matchmanagement"]=globalThis["webpackChunkquasar_bgb_matchmanagement"]||[]).push([[105],{6105:(t,e,a)=>{a.r(e),a.d(e,{default:()=>ct});var l=a(9835),s=a(6970);const i={class:"q-pa-md",style:{"max-width":"500px"}},c={class:"q-pa-md bg-grey-10 text-white",style:{"max-width":"500px"}},o={class:"q-pa-md q-gutter-sm"},n=(0,l._)("div",{class:"text-h6"},"Spiel erfassen",-1),d={class:"q-pt-md"},m={class:"q-gutter-sm"},u={class:"q-pt-md",style:{"max-width":"300px"}},h={class:"row items-center justify-end"},r={class:"row items-center justify-end"},p={class:"q-pt-md",style:{"max-width":"300px"}},w=(0,l._)("span",{class:"q-ml-sm"},"Dieses Spiel besteht bereits!",-1),b=(0,l._)("div",{class:"text-h6"},"Spiel ändern",-1),x={class:"q-pt-md"},f={class:"q-gutter-sm"},M={class:"q-pt-md",style:{"max-width":"300px"}},g={class:"row items-center justify-end"},_={class:"row items-center justify-end"},W={class:"q-pt-md",style:{"max-width":"300px"}},y=(0,l._)("span",{class:"q-ml-sm"},"Datensatz löschen?",-1);function v(t,e,a,v,q,U){const V=(0,l.up)("q-toolbar-title"),k=(0,l.up)("q-btn"),$=(0,l.up)("q-toolbar"),D=(0,l.up)("q-item-label"),S=(0,l.up)("q-item-section"),H=(0,l.up)("q-item"),A=(0,l.up)("q-list"),N=(0,l.up)("q-card-section"),I=(0,l.up)("q-input"),P=(0,l.up)("q-checkbox"),R=(0,l.up)("q-date"),Q=(0,l.up)("q-popup-proxy"),C=(0,l.up)("q-icon"),Z=(0,l.up)("q-time"),j=(0,l.up)("q-separator"),L=(0,l.up)("q-card-actions"),B=(0,l.up)("q-card"),O=(0,l.up)("q-dialog"),T=(0,l.up)("q-avatar"),Y=(0,l.up)("q-img"),E=(0,l.up)("q-page"),z=(0,l.Q2)("ripple"),J=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(E,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)($,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Spiele")])),_:1}),v.IsAdministrator?((0,l.wg)(),(0,l.j4)(k,{key:0,class:"bg-white text-primary",icon:"add",label:"Neu",onClick:e[0]||(e[0]=t=>v.addMatch=!0)})):(0,l.kq)("",!0)])),_:1})]),(0,l._)("div",c,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.matchObject,((t,e)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(A,{dark:"",bordered:"",separator:"",style:{"max-width":"470px"},key:e},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(H,{clickable:"",onClick:e=>U.onMatchClick(t.matchId,t.match,t.published,t.date+" "+t.time,t.annotations)},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{overline:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Spiel: "+(0,s.zw)(t.match),1)])),_:2},1024),(0,l.Wm)(D,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Wann: "+(0,s.zw)(t.date)+" - "+(0,s.zw)(t.time),1)])),_:2},1024),"TRUE"===t.published?((0,l.wg)(),(0,l.j4)(D,{key:0,caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Publiziert: Ja")])),_:1})):(0,l.kq)("",!0),"FALSE"===t.published?((0,l.wg)(),(0,l.j4)(D,{key:1,caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Publiziert: Nein")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(D,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Kommentar: "+(0,s.zw)(t.annotations),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[z]])])),_:2},1024)),[[z]]))),128))]),(0,l._)("div",o,[(0,l.Wm)(O,{modelValue:v.addMatch,"onUpdate:modelValue":e[8]||(e[8]=t=>v.addMatch=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{style:{"min-width":"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[n])),_:1}),(0,l.Wm)(N,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{dense:"",modelValue:v.txtMatchNew,"onUpdate:modelValue":e[1]||(e[1]=t=>v.txtMatchNew=t),autofocus:"",label:"Spiel"},null,8,["modelValue"]),(0,l._)("div",d,[(0,l._)("div",m,[(0,l._)("div",null,[(0,l.Wm)(P,{"left-label":"",modelValue:v.chbPublishedNew,"onUpdate:modelValue":e[2]||(e[2]=t=>v.chbPublishedNew=t),label:"Publizieren"},null,8,["modelValue"])])])]),(0,l._)("div",u,[(0,l.Wm)(I,{filled:"",modelValue:v.txtDatetimeNew,"onUpdate:modelValue":e[5]||(e[5]=t=>v.txtDatetimeNew=t)},{prepend:(0,l.w5)((()=>[(0,l.Wm)(C,{name:"event",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{modelValue:v.txtDatetimeNew,"onUpdate:modelValue":e[3]||(e[3]=t=>v.txtDatetimeNew=t),mask:"DD.MM.YYYY HH:mm"},{default:(0,l.w5)((()=>[(0,l._)("div",h,[(0,l.wy)((0,l.Wm)(k,{label:"Close",color:"primary",flat:""},null,512),[[J]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,l.w5)((()=>[(0,l.Wm)(C,{name:"access_time",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{modelValue:v.txtDatetimeNew,"onUpdate:modelValue":e[4]||(e[4]=t=>v.txtDatetimeNew=t),mask:"DD.MM.YYYY HH:mm",format24h:""},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.wy)((0,l.Wm)(k,{label:"Close",color:"primary",flat:""},null,512),[[J]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l._)("div",p,[(0,l.Wm)(I,{modelValue:v.txtAnnotationsNew,"onUpdate:modelValue":e[6]||(e[6]=t=>v.txtAnnotationsNew=t),filled:"",type:"textarea",label:"Kommentar"},null,8,["modelValue"])])])),_:1}),(0,l.Wm)(j),(0,l.Wm)(L,{class:"text-primary",align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(k,{flat:"",label:"Abbrechen"},null,512),[[J]]),(0,l.wy)((0,l.Wm)(k,{icon:"save",label:"Speichern",onClick:e[7]||(e[7]=t=>U.addMatchSave(v.txtMatchNew,v.chbPublishedNew,v.txtDatetimeNew,v.txtAnnotationsNew)),disable:""===v.txtMatchNew},null,8,["disable"]),[[J]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(O,{modelValue:v.showMatchExists,"onUpdate:modelValue":e[9]||(e[9]=t=>v.showMatchExists=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{icon:"pan_tool",color:"primary","text-color":"white"}),w])),_:1}),(0,l.Wm)(L,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(k,{flat:"",label:"Schliessen",color:"primary"},null,512),[[J]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(O,{modelValue:v.editMatch,"onUpdate:modelValue":e[18]||(e[18]=t=>v.editMatch=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{style:{"min-width":"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[b])),_:1}),(0,l.Wm)(N,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{dense:"",modelValue:v.txtMatch,"onUpdate:modelValue":e[10]||(e[10]=t=>v.txtMatch=t),autofocus:"",label:"Spiel"},null,8,["modelValue"]),(0,l._)("div",x,[(0,l._)("div",f,[(0,l._)("div",null,[(0,l.Wm)(P,{"left-label":"",modelValue:v.chbPublished,"onUpdate:modelValue":e[11]||(e[11]=t=>v.chbPublished=t),label:"Publizieren"},null,8,["modelValue"])])])]),(0,l._)("div",M,[(0,l.Wm)(I,{filled:"",modelValue:v.txtDatetime,"onUpdate:modelValue":e[14]||(e[14]=t=>v.txtDatetime=t)},{prepend:(0,l.w5)((()=>[(0,l.Wm)(C,{name:"event",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{modelValue:v.txtDatetime,"onUpdate:modelValue":e[12]||(e[12]=t=>v.txtDatetime=t),mask:"DD.MM.YYYY HH:mm"},{default:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l.wy)((0,l.Wm)(k,{label:"Close",color:"primary",flat:""},null,512),[[J]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,l.w5)((()=>[(0,l.Wm)(C,{name:"access_time",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{modelValue:v.txtDatetime,"onUpdate:modelValue":e[13]||(e[13]=t=>v.txtDatetime=t),mask:"DD.MM.YYYY HH:mm",format24h:""},{default:(0,l.w5)((()=>[(0,l._)("div",_,[(0,l.wy)((0,l.Wm)(k,{label:"Close",color:"primary",flat:""},null,512),[[J]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l._)("div",W,[(0,l.Wm)(I,{modelValue:v.txtAnnotations,"onUpdate:modelValue":e[15]||(e[15]=t=>v.txtAnnotations=t),filled:"",type:"textarea",label:"Kommentar"},null,8,["modelValue"])])])),_:1}),(0,l.Wm)(j),(0,l.Wm)(L,{class:"text-primary",align:"right"},{default:(0,l.w5)((()=>[v.IsAdministrator?((0,l.wg)(),(0,l.j4)(k,{key:0,icon:"delete",color:"primary",onClick:e[16]||(e[16]=t=>v.delMatch=!0)})):(0,l.kq)("",!0),(0,l.wy)((0,l.Wm)(k,{flat:"",label:"Abbrechen"},null,512),[[J]]),(0,l.wy)((0,l.Wm)(k,{icon:"save",label:"Speichern",onClick:e[17]||(e[17]=t=>U.editMatchSave(v.txtMatchId,v.txtOldMatch,v.txtMatch,v.chbPublished,v.txtDatetime,v.txtAnnotations)),disable:""===v.txtMatch},null,8,["disable"]),[[J]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(O,{modelValue:v.delMatch,"onUpdate:modelValue":e[20]||(e[20]=t=>v.delMatch=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{icon:"delete",color:"primary","text-color":"white"}),y])),_:1}),(0,l.Wm)(L,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(k,{flat:"",label:"Nein",color:"primary"},null,512),[[J]]),(0,l.wy)((0,l.Wm)(k,{flat:"",label:"Ja",color:"primary",onClick:e[19]||(e[19]=t=>U.archiveMatch(v.txtMatchId,v.txtOldMatch,v.txtDatetime))},null,512),[[J]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l.Wm)(Y,{src:"statics/BGB.jpg",class:"header-image absolute-top"})])),_:1})}a(9665),a(6727);var q=a(499);const U=(0,q.iH)(""),V=(0,q.iH)(""),k=(0,q.iH)(!1),$=(0,q.iH)(""),D=(0,q.iH)(""),S=(0,q.iH)(""),H={name:"ListMatch",setup(){return{IsAdministrator:(0,q.iH)(!0),txtMatchId:(0,q.iH)(U),txtMatch:(0,q.iH)(V),chbPublished:(0,q.iH)(k),txtDatetime:(0,q.iH)($),txtAnnotations:(0,q.iH)(D),txtOldMatch:(0,q.iH)(S),txtMatchNew:(0,q.iH)(""),chbPublishedNew:(0,q.iH)(!1),txtDatetimeNew:(0,q.iH)(""),txtAnnotationsNew:(0,q.iH)("<STANDARDTEXT>"),addMatch:(0,q.iH)(!1),showMatchExists:(0,q.iH)(!1),editMatch:(0,q.iH)(!1),delMatch:(0,q.iH)(!1)}},data(){return{URLMatch:"https://script.google.com/macros/s/AKfycbysBv-GIg2N_vpj7n1L3pWiK1WC0EC1bUfJCmv7kBXHfdPKxtbJg8bQyNJKFDkekGEDeA/exec?ID=1znyBnIzqghCeRImZ8fSVGB_gR6TESuqep20YbUhkhSU&SH=BGB-Match",URLParticipant:"https://script.google.com/macros/s/AKfycbz2PqyRf6et-Ju8JREOQJle1uxlABUhso--yKwIvGtJWt0AscZOSLfstyOSVX1fV3rvSw/exec?ID=1HCZKuGO-dmNJwrEsFyN2acvnE-WMHabBW8jWdhO4ggI&SH=BGB-Participant",URLParticipantArchive:"https://script.google.com/macros/s/AKfycbwqh5vulxjx6grOz9AllJMOtt6U3x1UWBwn9BOeB3HkjagbLNtW2AwQu_lxuBNwOMqgAQ/exec?ID=1fjnXO0Fsrj03Da8CDaBSClheSrE9Qr6VMNWzL-JQR7s&SH=BGB-ParticipantArchive",matchObject:[{match:"",published:"",time:"",annotations:"",date:"",matchId:""}]}},computed:{},mounted(){this.getTableMatch()},methods:{getTableMatch(){this.matchObject=[];const t=this.IsAdministrator?"":"TRUE";console.log("URLMatch: "+this.URLMatch+"&func=Read&published="+t),this.$axios(`${this.URLMatch}&func=Read&published=${t}`).then((t=>{this.tableMatch=t.data.split("\n");for(let e=0;e<this.tableMatch.length-1;e++){const t=this.tableMatch[e].split(",");this.setMatchObject(t[2],t[3],t[4].substr(0,5),t[5].replace(/<br>/g,"\n"),t[6],t[7])}})).catch((t=>{console.log(t)}))},setMatchObject(t,e,a,l,s,i){this.matchObject.push({match:t,published:e,time:a,annotations:l,date:s,matchId:i})},onMatchClick(t,e,a,l,s){console.log("Clicked on an Match: "+t+", "+e+", "+a+", "+l+", "+s),U.value=t,V.value=e,k.value="TRUE"===a,$.value=l,D.value=s;const i=l.substr(0,10),c=l.substr(11,5);S.value=e.trim()+" "+i.substr(0,6)+i.substr(8,2)+" - "+c.substr(0,5),this.IsAdministrator&&(this.editMatch=!0)},addMatchSave(t,e,a,l){console.log("addMatchSave: "+t+", "+e+", "+a+", "+l);const s=this.matchObject.map((t=>t.match)),i=s.includes(t);if(i)this.showMatchExists=!0;else{const s=a.substr(0,10),i=a.substr(11,5);this.$axios(`${this.URLMatch}&func=Add&match=${encodeURI(t.replace(","," "))}&published=${e}&time=${i}&annotations=${encodeURI(l.replace(",",";").replace(/(?:\r\n|\r|\n)/g,"<br>"))}&date=${s}`).then((t=>{"Success, requested action completed"===t.data&&this.getTableMatch()})).catch((t=>{console.log(t)}))}},editMatchSave(t,e,a,l,s,i){console.log("editMatchSave - Update: "+t+", "+e+", "+a+", "+l+", "+s+", "+i);const c=s.substr(0,10),o=s.substr(11,5),n=a.trim()+" "+c.substr(0,6)+c.substr(8,2)+" - "+o.substr(0,5);console.log("editMatchSave - UpdateMatch: "+e+", "+n),this.$axios(`${this.URLMatch}&func=Update&matchId=${t}&match=${encodeURI(a.replace(","," "))}&published=${l}&time=${o}&annotations=${encodeURI(i.replace(",",";").replace(/(?:\r\n|\r|\n)/g,"<br>"))}&date=${c}`).then((t=>{"Success, requested action completed"===t.data&&this.$axios(`${this.URLParticipant}&func=UpdateMatch&oldMatch=${e}&newMatch=${n}`).then((t=>{"Success, requested action completed"===t.data&&this.getTableMatch()})).catch((t=>{console.log(t)}))})).catch((t=>{console.log(t)}))},async archiveMatch(t,e,a){console.log("deleteMatch: "+t+", "+e+", "+a);const l=a.substr(0,10),s=t=>new Promise((e=>setTimeout(e,t)));this.$axios(`${this.URLParticipant}&func=ReadAll&match=${e}`).then((async t=>{this.tableParticipant=t.data.split("\n");for(let e=0;e<this.tableParticipant.length-1;e++){const t=this.tableParticipant[e].split(",");await s(1e3),this.$axios(`${this.URLParticipantArchive}&func=Add&timestamp=${t[1]}&match=${t[2]}&participant=${t[3]}&arrival=${t[4]}&annotations=${t[5]}&action=${t[6]}&reaction=${t[7]}&date=${l}&participant=${t[8]}`).catch((t=>{console.log(t)}))}})).catch((t=>{console.log(t)})),this.deleteMatch(t,e)},deleteMatch(t,e){this.$axios(`${this.URLParticipant}&func=DeleteMatch&match=${e}`).then((e=>{"Success, requested action completed"===e.data&&this.$axios(`${this.URLMatch}&func=Delete&matchId=${t}`).then((t=>{"Success, requested action completed"===t.data&&(this.getTableMatch(),this.editMatch=!1)})).catch((t=>{console.log(t)}))})).catch((t=>{console.log(t)}))}}};var A=a(1639),N=a(9885),I=a(1663),P=a(1973),R=a(8879),Q=a(3246),C=a(490),Z=a(1233),j=a(3115),L=a(2074),B=a(4458),O=a(3190),T=a(6611),Y=a(1006),E=a(2857),z=a(2765),J=a(2952),K=a(6770),G=a(926),F=a(1821),X=a(1357),tt=a(335),et=a(1136),at=a(2146),lt=a(9984),st=a.n(lt);const it=(0,A.Z)(H,[["render",v]]),ct=it;st()(H,"components",{QPage:N.Z,QToolbar:I.Z,QToolbarTitle:P.Z,QBtn:R.Z,QList:Q.Z,QItem:C.Z,QItemSection:Z.Z,QItemLabel:j.Z,QDialog:L.Z,QCard:B.Z,QCardSection:O.Z,QInput:T.Z,QCheckbox:Y.Z,QIcon:E.Z,QPopupProxy:z.Z,QDate:J.Z,QTime:K.Z,QSeparator:G.Z,QCardActions:F.Z,QAvatar:X.Z,QImg:tt.Z}),st()(H,"directives",{Ripple:et.Z,ClosePopup:at.Z})}}]);